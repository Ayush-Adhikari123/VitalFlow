{% load static %}
<!doctype html>
<html lang="en">

<head>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VitalFlow</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="/static/css/viewreport.css" />
</head>

<body>
  <div class="loading-screen" id="loadingScreen">
    <img src="/static/images/loding.gif" alt="">
  </div>
  <div class="header">
    <div class="logo">
      <img src="/static/Images/Logo.png" alt="Header Image" style="height: 100px;">
    </div>
    <div class="company-name">
      <h1>VITAL FLOW<br>BIO-LAB</h1>
    </div>
  </div>

  <div class="container ">
    <div class="rounded-box">
      <div class="content">
        <div class="top-buttons">
          <a href="/createreport"> <button class="btn btn-primary with-icon-1"></button></a>
        </div>
        <div class="top-buttons">
          <a href="/viewreport"><button class="btn btn-primary with-icon-4"></button></a>
        </div>
        <div class="top-buttons">
          <a href="/techprofile"><button class="btn btn-primary with-icon-2"></button></a>
        </div>
        <div class="top-buttons">
          <button class="btn btn-primary with-icon-3" id="foo" onclick="myFunction()" data-toggle="modal"
            data-target="#exampleModalLong2"></button>
        </div>
      </div>
    </div>

    <div class="modal fade" id="exampleModalLong2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Logout</h5>
            <button type="button" class="close" style='border: none; background:none' data-dismiss="modal"
              onclick="myFunction1()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Are you sure you want to logout?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" onclick="myFunction1()" data-dismiss="modal">Close</button>
            <a href="/"><button type="button" class="btn btn-primary" onclick="showLoadingScreen()">Logout</button></a>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="exampleModalLong1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
      data-backdrop="static" data-keyboard="false" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Delete</h5>
            <button type="button" class="close" style='border: none; background:none' data-dismiss="modal"
              onclick="myFunction1()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Are you sure you want to Delete it?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" onclick="myFunction1()" data-dismiss="modal">No</button>
            <button type="button" class="btn btn-primary">Yes</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="viewreports" tabindex="0" role="dialog" aria-labelledby="loginModalLabel"
      data-keyboard="false" aria-hidden="true">

      <div class="modal-dialog1 mt-5" role="document">

        <div class="views d-flex justify-content-center">
          <div class="me-2 mt-1">
            <img src="/static/images/Logo.png" height="50" alt="Your Image">
          </div>
          <div>
            <div>VITALFLOW BIO-LAB</div>
            <div class="address-txt">Dillibazar, Kathmandu</div>
            <div class="address-txt">9841234567,01-444123</div>
          </div>
        </div>
        <div class="view-2">
          <div class="d-flex  justify-content-between">
            <div class="ms-4">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Report Id:</label>
              <input type="text" id="userInput1 value=" {{ detail.report_id }}""
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px; background-color: #70b6c6; ">
            </div>
            <div class="me-4">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Date:</label>
              <input type="text" id="userInput2" value="{{ report_data.date }}"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px; background-color: #70b6c6;">
            </div>
          </div>
          <div class="row">
            <div class="col-5 ms-5">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Patient Name:</label>
              <input type="text" id="userInput1"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px; background-color: #70b6c6;"
                value="{{ report_data.patient_Name }}">
            </div>

            <div class="col-5">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Contact :</label>
              <input type="text" id="userInput4" value="{{ report_data.contact }}"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px;  margin-left:15px; background-color: #70b6c6;">
            </div>
          </div>
          <div class="row ">
            <div class="col-5 ms-5 ">
              <label for="userInput px-0" style="font-size: 12px; font-weight: bold;">Age :</label>
              <input type="text" id="userInput5" value="{{ report_data.age }}"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px; margin-left:51px; background-color: #70b6c6; ">
            </div>

            <div class="col-5">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Gender :</label>
              <input type="text" id="userInput6" value="{{ report_data.gender }}"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px;  margin-left:18px; background-color: #70b6c6;">
            </div>
          </div>
          <div class="row">
            <div class="col-5 ms-5">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Address :</label>
              <input type="text" id="userInput7" value="{{ report_data.address }}"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px; margin-left:28px; background-color: #70b6c6;">
            </div>

            <div class="col-5">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">Consultant:</label>
              <input type="text" id="userInput8" value="{{ report_data.consultant }}"
                style="width: 84px; height: 15px; border: none; font-size: 12px; margin-buttom:20px; background-color: #70b6c6;">
            </div>
          </div>
        </div>

        <div class="container2">

          <div class="view-5 d-flex mt-1 justify-content-around">
            <div>
              <div><img src="/static/images/Signature1.png" height="50" width="100" alt="Your Image"> </div>
              <hr class="line">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">LAB TECHNICIAN</label>
            </div>

            <div>
              <div><img src="/static/images/Signature2.png" class="mx-auto d-block" height="50" width="100"
                  alt="Your Image"> </div>
              <hr class="line">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">MEDICAL TECHNOLOGIES</label>
            </div>

            <div>
              <div><img src="/static/images/Signature4.png" class="mx-auto d-block" height="50" width="100"
                  alt="Your Image"> </div>
              <hr class="line">
              <label for="userInput" style="font-size: 12px; font-weight: bold;">PATHOLOGIST</label>
            </div>


          </div>

        </div>

        <div class="container3">
          <div class="view-6 d-flex mt-3 justify-content-around">
            <div>
              <label for="userInput" style="font-size: 12px; font-weight: bold; color: #FFFFFF;">Terms &
                Condition</label>
            </div>
            <div>
              <label for="userInput" style="font-size: 12px; font-weight: bold; color: #FFFFFF;">Privacy
                Policies</label>
            </div>
            <div>
              <label for="userInput"
                style="font-size: 12px; font-weight: bold; color: #FFFFFF;">vitalflow@gmaIl.com</label>
            </div>
            <div>
              <label for="userInput" style="font-size: 12px; font-weight: bold; color: #FFFFFF;">2023 All Right
                Reserved</label>
            </div>
          </div>

        </div>
        <div class="container4">
          <div class="view-7 d-flex mt-2 justify-content-end">
            <div class="save1 me-3">
              <label for="userInput" style="font-size: 15px; font-weight: bold;">SAVE AS :-</label>
            </div>
            <div class="save2 me-3 ">
              <button type="button" class="pdf">
                PDF
              </button>
            </div>
            <div class="save3 me-3">
              <button type="button" class="pdf" onclick="location.href='viewreport'">Close</button>

            </div>

          </div>

        </div>

      </div>
    </div>

    <div class="rounded-box2 ">
      <form class="d-flex mb-5" role="search">
        <input class="form-control me-2 " style="width: 300px" type="search" placeholder="Patient Id"
          aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
      <div class="table-scroll">
        <table class="table table-striped ">
          <thead>
            <tr>
              <th scope="col">S.N</th>
              <th scope="col">Full Name</th>
              <th scope="col">Age</th>
              <th scope="col">Contact</th>
              <th scope="col">Gender</th>

            </tr>
          </thead>
          <tbody>
            {% for detail in report_data %}
            <tr class="no-click">
              <th scope="row">{{ forloop.counter }}</th>
              <td>{{ detail.patient_Name }}</td>
              <td>{{ detail.age }}</td>
              <td>{{ detail.contact }}</td>
              <td>{{ detail.gender }}</td>

              <td>
                <div class="d-flex justify-content-end"><button type="button" class="btn btn-primary btn-Login"
                    data-toggle="modal" data-target="#loginModal">
                    View
                  </button>
                  <button type="button" class=" btn btn-success btn-Login ms-2 me-2" data-toggle="modal"
                    onclick="updateRecord({{ detail.contact }})">
                    Edit
                  </button>
                  <button type="button" class="btn btn-danger btn-Login" data-toggle="modal"
                    data-target="#exampleModalLong1">
                    Delete
                  </button>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

        <form id="viewForm" method="POST" action="{% url 'test' %}">
          {% csrf_token %}
          <div class="form-group">
            <label for="patient_Name"></label>
            <input type="text" id="patientName" name="patient_Name" style="display: none;" />
          </div>
          <div class="form-group">
            <label for="contact"></label>
            <input type="text" id="contact" name="contact" style="display: none;" required />
          </div>
        </form>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const viewButtons = document.querySelectorAll('.view-btn');

        viewButtons.forEach(button => {
          button.addEventListener('click', function () {
            const patientName = this.getAttribute('data-name');
            const contact = this.getAttribute('data-contact');

            console.log("Patient Name:", patientName);
            console.log("Contact:", contact);

            document.getElementById('patientName').value = patientName;
            document.getElementById('contact').value = contact;

            // Submit the form automatically
            document.getElementById('viewForm').submit();
          });
        });
      });

    </script>



    <script>
      function showLoadingScreen() {
        // Show the loading screen
        document.getElementById('loadingScreen').style.display = 'flex';

        // Hide the loading screen after 3 seconds (3000 milliseconds)
        setTimeout(function () {
          document.getElementById('loadingScreen').style.display = 'none';
        }, 3000);
      }

      function updateRecord(contact) {
        // Redirect to the update report page when the Edit button is clicked
        window.location.href = `/updatereport/${contact}/`;
      }

      function myFunction() {
        document.getElementById('foo').style.cssText = ''
      }

      function myFunction1() {
        document.getElementById('foo').style.cssText = ' '
      }
    </script>

</body>

</html>